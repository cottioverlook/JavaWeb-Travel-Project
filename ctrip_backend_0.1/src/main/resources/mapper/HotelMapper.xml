<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="top.potatohub.ctrip.backend.mapper.HotelMapper">

    <select id="getHotels" resultType="Hotel">
        SELECT * FROM tb_hotels
        <where>
            <if test="name_keyword != null and name_keyword != ''">
                AND name LIKE CONCAT('%', #{name_keyword}, '%')
            </if>
            <if test="address_keyword != null and address_keyword != ''">
                AND address LIKE CONCAT('%', #{address_keyword}, '%')
            </if>
            <if test="city_id != null and city_id != ''">
                AND city_id = #{city_id}
            </if>
            <if test="rating != null">
                AND rating >= #{rating}
            </if>
        </where>
        LIMIT #{limit} OFFSET #{offset}
    </select>

    <select id="getRoomsByHotelId" resultType="HotelRoom">
        SELECT * FROM tb_hotel_rooms WHERE hotel_id = #{hotelId}
    </select>

    <select id="getRoomById" resultType="HotelRoom">
        SELECT * FROM tb_hotel_rooms WHERE id = #{id}
    </select>

</mapper>
