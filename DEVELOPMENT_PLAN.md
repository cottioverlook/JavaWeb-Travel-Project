# 携程网仿站项目开发计划 (Ctrip Clone Development Plan)

作为你的 JavaWeb 指导教师，我为你制定了这份详细的开发计划。我们将采用 **前后端分离** 的模式，分阶段、分模块地完成这个项目。不要急于求成，每一步都确保功能完善后再进行下一步。

---

## 📅 项目阶段概览

| 阶段 | 核心任务 | 预计目标 |
| :--- | :--- | :--- |
| **阶段一** | **环境与基础搭建** | ✅ 已完成：后端运行正常，数据库连接成功，前端可启动。 |
| **阶段二** | **用户模块 (Auth & User)** | 实现注册、登录、个人信息修改、密码重置。 |
| **阶段三** | **核心业务 - 查询与展示** | 能够搜索和查看机票、火车票、酒店、景点的信息。 |
| **阶段四** | **核心业务 - 预订与订单** | 实现下单流程，生成订单，并进行模拟支付。 |
| **阶段五** | **评价与推荐系统** | 实现酒店/景点评价功能，以及首页的个性化推荐。 |
| **阶段六** | **综合测试与优化** | 全流程测试，修复 Bug，UI 细节调整。 |

---

## 🚀 详细执行步骤

### 阶段一：环境与基础搭建 (已完成 ✅)
*   **后端**：Spring Boot + MyBatis + MySQL。
*   **前端**：Vue 3 + Vite + Element Plus (或类似 UI 库)。
*   **数据库**：`ctrip_db` 已导入，包含用户、航班、火车、酒店、景点等基础表。

---

### 阶段二：用户模块 (User & Auth)
**目标**：让用户拥有身份，这是后续预订的基础。

#### 1. 后端开发
*   **接口实现**：
    *   `POST /api/auth/register`: 用户注册 (手机号/邮箱)。
    *   `POST /api/auth/login`: 用户登录 (返回 JWT Token)。
    *   `GET /api/user/profile`: 获取当前用户信息 (需携带 Token)。
    *   `PUT /api/user/profile`: 修改个人信息。
    *   `PUT /api/user/password`: 修改密码。
*   **安全验证**：确保密码在数据库中加密存储 (如 BCrypt)，并使用 JWT 拦截器验证受保护的接口。

#### 2. 前端开发
*   **页面开发**：
    *   `Login.vue`: 登录页。
    *   `Register.vue`: 注册页。
    *   `UserCenter.vue`: 个人中心页。
*   **逻辑对接**：
    *   配置 `axios` 拦截器，自动在请求头中携带 Token。
    *   实现登录状态的持久化 (Pinia 或 localStorage)。

---

### 阶段三：核心业务 - 查询与展示 (Search & Display)
**目标**：让用户能找到他们想买的产品。

#### 1. 基础数据查询 (后端)
*   **机票 (Flight)**: `GET /api/flights` (支持按出发地、目的地、日期搜索)。
*   **火车 (Train)**: `GET /api/trains` (类似机票搜索)。
*   **酒店 (Hotel)**: `GET /api/hotels` (支持按城市、星级搜索)。
*   **景点 (Scenery)**: `GET /api/sceneries` (支持分类展示，如"自然风光"、"人文古迹")。
*   **详情页接口**: 为每个业务提供 `/{id}` 详情接口，包含更详细的信息 (如酒店的房型列表 `GET /api/hotels/{id}/rooms`)。

#### 2. 列表与详情页 (前端)
*   **组件开发**:
    *   `SearchBar`: 封装通用的搜索框组件。
    *   `FlightList.vue` / `TrainList.vue` / `HotelList.vue` / `SceneryList.vue`: 展示搜索结果。
    *   `Detail.vue`: 点击列表项后进入的详情页，展示图片、价格、房型/舱位等。

---

### 阶段四：核心业务 - 预订与订单 (Booking & Order)
**目标**：实现商业闭环。

#### 1. 订单模型设计 (后端)
*   确保数据库中有 `tb_flight_orders`, `tb_train_orders`, `tb_hotel_orders`, `tb_scenery_orders`。
*   **下单接口**:
    *   `POST /api/orders/flight`
    *   `POST /api/orders/train`
    *   ... (以此类推)
    *   *注意*：下单时需校验库存/余票，扣减库存，并生成"待支付"状态的订单。

#### 2. 支付系统 (Payment)
*   **模拟支付**: 由于无法直接接入真实的微信/支付宝，我们使用 **沙箱环境** 或 **模拟页面**。
*   **流程**:
    1.  前端点击"去支付"，调用后端 `POST /api/pay`，生成支付链接或二维码。
    2.  跳转到模拟支付页 (`alipay_pay.html` 已存在于模板中)。
    3.  用户确认支付后，后端更新订单状态为 `PAID`。

#### 3. 订单管理 (前端)
*   在 `UserCenter.vue` 中增加 "我的订单" 模块。
*   实现订单列表展示，区分状态 (待支付、已完成、已取消)。
*   实现 "取消订单" 和 "退款" 按钮的逻辑。

---

### 阶段五：评价与推荐 (Review & Recommendation)
**目标**：增加用户互动和平台智能感。

#### 1. 评价系统
*   **规则**: 仅酒店 (`HOTEL`) 和景点 (`SCENERY`) 可评价，且必须是 `COMPLETED` (已完成) 的订单。
*   **后端**:
    *   `POST /api/reviews`: 提交评价 (需校验是否有对应的已完成订单)。
    *   `GET /api/reviews/{targetId}`: 获取某酒店/景点的所有评价。
*   **前端**:
    *   在订单列表的 "已完成" 订单旁添加 "去评价" 按钮。
    *   在酒店/景点详情页底部展示评价列表。

#### 2. 首页个性化推荐
*   **后端**: `GET /api/recommendations/scenery`。
    *   *实现逻辑*: 简单起见，可以随机从数据库抽取 3-5 个高评分或热门的景点返回。
*   **前端**: 在 `HomeView.vue` 的显眼位置展示推荐轮播图或卡片。

---

### 阶段六：综合测试与优化
1.  **功能测试**: 扮演用户，完整走一遍 "注册 -> 搜索 -> 下单 -> 支付 -> 评价" 的流程。
2.  **UI 优化**: 确保页面布局不崩坏，Element Plus 组件样式统一。
3.  **Bug 修复**: 检查控制台报错，修复空指针异常或前端 undefined 错误。

---

## 💡 老师的建议
1.  **先跑通主线**: 先把 "用户能登录" 和 "能看到数据" 实现了，再考虑下单支付。
2.  **利用现有资源**: 你的后端代码中已经有不少 Controller 和 Entity，**先阅读代码**，看看哪些接口已经写好了，不要重复造轮子。
3.  **多看日志**: 遇到报错时，后端看 IDEA 控制台日志，前端看浏览器 F12 Console。

祝你开发顺利！如果有具体代码问题，随时叫我。
